<div class="prod-container" [ngClass]="{'single-column': isCartEmpty()}">
	<div class="prod-list">
		<mat-card class="product" *ngFor="let product of products$ | async">
			<mat-card-header>
				<mat-card-title align="center">{{ product.name }}</mat-card-title>
				<mat-card-subtitle>{{ product.description }}</mat-card-subtitle>
			</mat-card-header>
			<img class="prod-image" mat-card-image src="{{ product.image }}" />
			<mat-card-content>
				<p class="price">{{ product.price | currency }}</p>
				<p class="type">{{ product.type }}</p>
			</mat-card-content>
			<mat-card-actions>
				<button color="primary" (click)="addToCart(product)" mat-raised-button>Add to cart</button>
				<button mat-raised-button>View</button>
			</mat-card-actions>
		</mat-card>
	</div>
	<div class="cart-info" *ngIf="cartList.length > 0">
		<div class="cart-total">
			<!-- <h3>Cart</h3> -->
			<p>Cart Total ${{ calcTotal | number : '1.2-2' }}</p>
			<button mat-raised-button color="accent" (click)="checkout()" routerLink="/shopping-cart">Checkout</button>
		</div>
		<div class="cart-item" *ngFor="let item of cartList; let i = index">
			<p>{{ item.name }} {{ item.price ? (item.price | currency) : '' }}</p>
			<p>{{ item.longDescription }}</p>

			<div>
				<mat-form-field appearance="outline">
					<mat-label>Quantity</mat-label>
					<input type="number" matInput min="1" [(ngModel)]="item.quantity" [ngModelOptions]="{standalone: true}" (change)="changeQuantity(item, i)" />
				</mat-form-field>
			</div>

			<div class="cart-footer">
				<button mat-raised-button color="warn" (click)="removeFromCart(item)">Remove</button>
				<p>Total ${{ item.quantity && item.price ? (item.quantity * item.price | number : '1.2-2') : '' }}</p>
			</div>
		</div>
	</div>
</div>
